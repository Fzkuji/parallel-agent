# Question Grouping Impact Experiment - Cross-Batch (CSA)
# Model: Qwen/Qwen2.5-7B-Instruct + CSA (10K samples, 3 epochs)
# Dataset: squad - 480 questions from 96 contexts (5 questions each)
# Strategy: Cross-Batch with CrossBatchAttention module

## Results - EM (Exact Match)

GroupSize  |  Cross-Batch |  NumGroups
--------------------------------------
1          |        0.810 |        480
2          |        0.731 |        240
3          |        0.646 |        160
4          |        0.567 |        120
5          |        0.810 |         96

## Results - F1 Score

GroupSize  |  Cross-Batch
-------------------------
1          |        0.910
2          |        0.824
3          |        0.732
4          |        0.640
5          |        0.910

## Results - Lenient Accuracy

GroupSize  |  Cross-Batch
-------------------------
1          |        0.958
2          |        0.910
3          |        0.846
4          |        0.794
5          |        0.958


## Token Statistics (Total)

GroupSize  |  Cross-Batch (Prompt Tokens - Deduplicated)
-------------------------
1          |      119,112
2          |       78,461
3          |       64,616
4          |       57,875
5          |       53,956

## Token Statistics (API)

GroupSize  |  Cross-Batch (Prompt Tokens - API)
-------------------------
1          |      119,112
2          |      119,255
3          |      118,514
4          |      118,499
5          |      119,112

## Generated Tokens (Total)

GroupSize  |  Cross-Batch
-------------------------
1          |        5,474
2          |        5,553
3          |        5,665
4          |        5,769
5          |        5,471

## GPU Latency (seconds)

GroupSize  |  Cross-Batch
-------------------------
1          |       105.45
2          |        84.61
3          |        71.12
4          |        65.08
5          |        49.44

## Wall Time (seconds)

GroupSize  |  Cross-Batch
-------------------------
1          |        30.67
2          |        28.40
3          |        26.50
4          |        26.43
5          |        23.03

## Avg Prompt Tokens per Question (Deduplicated)

GroupSize  |  Cross-Batch
-------------------------
1          |        248.2
2          |        163.5
3          |        134.6
4          |        120.6
5          |        112.4

## Avg Prompt Tokens per Question (API)

GroupSize  |  Cross-Batch
-------------------------
1          |        248.2
2          |        248.4
3          |        246.9
4          |        246.9
5          |        248.2

## Avg Generated Tokens per Question

GroupSize  |  Cross-Batch
-------------------------
1          |         11.4
2          |         11.6
3          |         11.8
4          |         12.0
5          |         11.4

## Avg Latency per Question (seconds)

GroupSize  |  Cross-Batch
-------------------------
1          |       0.2197
2          |       0.1763
3          |       0.1482
4          |       0.1356
5          |       0.1030

## API Cost (USD, $0.10/M input + $0.20/M output)

GroupSize  |  Cross-Batch
-------------------------
1          |       13.006
2          |       13.036
3          |       12.982
4          |       12.989
5          |       13.005

## Performance Comparison

Strategy           | EM (G=1) | EM (G=5) | Improvement
-------------------|----------|----------|------------
0-shot Independent |   80.4%  |   80.4%  |    --
0-shot Sequential  |   80.4%  |   81.7%  |    --
Cross-Batch (CSA)  |   81.0%  |   81.0%  |  +0.6%

Note: CSA shows similar degradation pattern as Sequential at G=2-4.
Training on 10K SQuAD samples with CrossBatchAttention (51M params).
